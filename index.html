<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Who is the Spy? | Game</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React & ReactDOM -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&family=Noto+Sans+Arabic:wght@300;400;600;800&display=swap');
        
        :root {
            --font-en: 'Inter', sans-serif;
            --font-ar: 'Noto Sans Arabic', sans-serif;
        }

        body { 
            background-color: #020617; 
            margin: 0; 
            overflow-x: hidden;
            color: #f8fafc;
        }

        .lang-en { font-family: var(--font-en); }
        .lang-ar { font-family: var(--font-ar); }

        .glass-panel {
            background: rgba(30, 41, 59, 0.7);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .spy-gradient {
            background: linear-gradient(135deg, #ef4444 0%, #7f1d1d 100%);
        }
        .citizen-gradient {
            background: linear-gradient(135deg, #3b82f6 0%, #1e3a8a 100%);
        }
        .animate-pulse-slow {
            animation: pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: .5; }
        }
    </style>
</head>
<body class="text-slate-100">
    <div id="root"></div>

    <!-- Firebase SDKs (Compatibility Version) -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- Firebase Configuration ---
        const firebaseConfig = {
            apiKey: "AIzaSyApAJaNfF0YHupunLRlK3jRYvttxczWShY",
            authDomain: "who-is-the-spy-919b9.firebaseapp.com",
            projectId: "who-is-the-spy-919b9",
            storageBucket: "who-is-the-spy-919b9.firebasestorage.app",
            messagingSenderId: "607075438373",
            appId: "1:607075438373:web:a03e9fb8b243cd993e14cc"
        };

        if (!firebase.apps.length) {
            firebase.initializeApp(firebaseConfig);
        }
        const auth = firebase.auth();
        const db = firebase.firestore();
        const appId = 'spy_master_pro_v2';

        const TRANSLATIONS = {
            en: {
                title: "Who is the Spy?",
                subtitle: "A game of wits and deception",
                playerName: "Player Name",
                namePlaceholder: "Enter your name...",
                createRoom: "Create New Room",
                orJoin: "Or join a room",
                roomCode: "Room Code",
                join: "Join",
                participants: "Participants",
                waitingAdmin: "Waiting for admin to start...",
                startBtn: "Start Round Now",
                spyTitle: "You are the Spy!",
                spyDesc: "Mission: Discover the location from their words without getting caught.",
                missionLabel: "Mission: Stay Mysterious",
                citizenTitle: "You are a Citizen",
                locationIs: "Location is:",
                pickWord: "Select the actual word:",
                instructions: "Round Instructions:",
                instr1: "‚Ä¢ Citizens see 4 words; only one is true for the location.",
                instr2: "‚Ä¢ Citizens must identify the spy through questioning.",
                instr3: "‚Ä¢ Spy wins if they guess the location.",
                newRound: "New Round",
                errorName: "Please enter your name first",
                errorJoin: "Room not found!",
                errorStart: "Need at least 3 players",
                loading: "Loading...",
                serverStatus: "SERVER_STATUS: CONNECTED",
                copied: "Copied!",
                copyLabel: "Copy code"
            },
            ar: {
                title: "ŸÖŸÜ ŸáŸà ÿßŸÑÿ¨ÿßÿ≥Ÿàÿ≥ÿü",
                subtitle: "ŸÑÿπÿ®ÿ© ÿßŸÑÿÆÿØÿßÿπ ŸàÿßŸÑÿ∞ŸÉÿßÿ° ÿßŸÑÿ¨ŸÖÿßÿπŸäÿ©",
                playerName: "ÿßÿ≥ŸÖ ÿßŸÑŸÑÿßÿπÿ®",
                namePlaceholder: "ÿßÿØÿÆŸÑ ÿßÿ≥ŸÖŸÉ ŸáŸÜÿß...",
                createRoom: "ÿ•ŸÜÿ¥ÿßÿ° ÿ∫ÿ±ŸÅÿ© ÿ¨ÿØŸäÿØÿ©",
                orJoin: "ÿ£Ÿà ÿßŸÜÿ∂ŸÖ ŸÑÿ∫ÿ±ŸÅÿ©",
                roomCode: "ÿ±ŸÖÿ≤ ÿßŸÑÿ∫ÿ±ŸÅÿ©",
                join: "ÿØÿÆŸàŸÑ",
                participants: "ÿßŸÑŸÖÿ¥ÿßÿ±ŸÉŸäŸÜ",
                waitingAdmin: "ÿ®ÿßŸÜÿ™ÿ∏ÿßÿ± ÿ£ÿØŸÖŸÜ ÿßŸÑÿ∫ÿ±ŸÅÿ© ŸÑŸÑÿ®ÿØÿ°...",
                startBtn: "ÿßÿ®ÿØÿ£ ÿßŸÑÿ¨ŸàŸÑÿ© ÿßŸÑÿ¢ŸÜ",
                spyTitle: "ÿ£ŸÜÿ™ ÿßŸÑÿ¨ÿßÿ≥Ÿàÿ≥!",
                spyDesc: "ŸÖŸáŸÖÿ™ŸÉ: ÿßŸÉÿ™ÿ¥ŸÅ ÿßŸÑŸÖŸÉÿßŸÜ ŸÖŸÜ ŸÉŸÑÿßŸÖŸáŸÖ ÿØŸàŸÜ ÿ£ŸÜ ŸäŸÉÿ¥ŸÅŸàŸÉ.",
                missionLabel: "ÿßŸÑŸÖŸáŸÖÿ©: ÿßÿ®ŸÇŸé ÿ∫ÿßŸÖÿ∂ÿßŸã",
                citizenTitle: "ÿ£ŸÜÿ™ ŸÖŸàÿßÿ∑ŸÜ",
                locationIs: "ÿßŸÑŸÖŸÉÿßŸÜ ŸáŸà:",
                pickWord: "ÿßÿÆÿ™ÿ± ÿßŸÑŸÉŸÑŸÖÿ© ÿßŸÑÿµÿ≠Ÿäÿ≠ÿ©:",
                instructions: "ÿ™ÿπŸÑŸäŸÖÿßÿ™ ÿßŸÑÿ¨ŸàŸÑÿ©:",
                instr1: "‚Ä¢ Ÿäÿ±Ÿâ ÿßŸÑŸÖŸàÿßÿ∑ŸÜŸàŸÜ 4 ŸÉŸÑŸÖÿßÿ™ÿõ Ÿàÿßÿ≠ÿØÿ© ŸÖŸÜŸáÿß ŸÅŸÇÿ∑ ŸáŸä ÿßŸÑÿµÿ≠Ÿäÿ≠ÿ© ŸÑŸÑŸÖŸÉÿßŸÜ.",
                instr2: "‚Ä¢ ÿπŸÑŸâ ÿßŸÑŸÖŸàÿßÿ∑ŸÜŸäŸÜ ŸÉÿ¥ŸÅ ÿßŸÑÿ¨ÿßÿ≥Ÿàÿ≥ ÿ®ÿßŸÑÿ£ÿ≥ÿ¶ŸÑÿ© ŸàÿßŸÑÿ™ÿµŸàŸäÿ™.",
                instr3: "‚Ä¢ ÿπŸÑŸâ ÿßŸÑÿ¨ÿßÿ≥Ÿàÿ≥ ŸÉÿ¥ŸÅ ÿßŸÑŸÖŸÉÿßŸÜ ŸÑŸäŸÅŸàÿ≤.",
                newRound: "ÿ¨ŸàŸÑÿ© ÿ¨ÿØŸäÿØÿ©",
                errorName: "Ÿäÿ±ÿ¨Ÿâ ÿ•ÿØÿÆÿßŸÑ ÿßÿ≥ŸÖŸÉ ÿ£ŸàŸÑÿßŸã",
                errorJoin: "ÿßŸÑÿ∫ÿ±ŸÅÿ© ÿ∫Ÿäÿ± ŸÖŸàÿ¨ŸàÿØÿ©!",
                errorStart: "ÿ™ÿ≠ÿ™ÿßÿ¨ ÿ•ŸÑŸâ 3 ŸÑÿßÿπÿ®ŸäŸÜ ÿπŸÑŸâ ÿßŸÑÿ£ŸÇŸÑ",
                loading: "ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ...",
                serverStatus: "ÿ≠ÿßŸÑÿ© ÿßŸÑÿ≥Ÿäÿ±ŸÅÿ±: ŸÖÿ™ÿµŸÑ",
                copied: "ÿ™ŸÖ ÿßŸÑŸÜÿ≥ÿÆ!",
                copyLabel: "ŸÜÿ≥ÿÆ ÿßŸÑÿ±ŸÖÿ≤"
            }
        };

        const LOCATIONS = [
            { en: "Hospital", ar: "ÿßŸÑŸÖÿ≥ÿ™ÿ¥ŸÅŸâ", words: { en: ["Doctor", "Nurse", "Surgery", "Patient"], ar: ["ÿ∑ÿ®Ÿäÿ®", "ŸÖŸÖÿ±ÿ∂ÿ©", "ÿ¨ÿ±ÿßÿ≠ÿ©", "ŸÖÿ±Ÿäÿ∂"] } },
            { en: "School", ar: "ÿßŸÑŸÖÿØÿ±ÿ≥ÿ©", words: { en: ["Teacher", "Student", "Library", "Exam"], ar: ["ŸÖÿπŸÑŸÖ", "ÿ∑ÿßŸÑÿ®", "ŸÖŸÉÿ™ÿ®ÿ©", "ÿßŸÖÿ™ÿ≠ÿßŸÜ"] } },
            { en: "Restaurant", ar: "ÿßŸÑŸÖÿ∑ÿπŸÖ", words: { en: ["Chef", "Waiter", "Menu", "Dinner"], ar: ["ÿ∑ÿ®ÿßÿÆ", "ŸÜÿßÿØŸÑ", "ŸÇÿßÿ¶ŸÖÿ© ÿ∑ÿπÿßŸÖ", "ÿπÿ¥ÿßÿ°"] } },
            { en: "Airport", ar: "ÿßŸÑŸÖÿ∑ÿßÿ±", words: { en: ["Pilot", "Passport", "Runway", "Ticket"], ar: ["ÿ∑Ÿäÿßÿ±", "ÿ¨Ÿàÿßÿ≤ ÿ≥ŸÅÿ±", "ŸÖÿØÿ±ÿ¨", "ÿ™ÿ∞ŸÉÿ±ÿ©"] } },
            { en: "Forest", ar: "ÿßŸÑÿ∫ÿßÿ®ÿ©", words: { en: ["Trees", "Camping", "Hunter", "Wolves"], ar: ["ÿ¥ÿ¨ÿ±", "ÿ™ÿÆŸäŸäŸÖ", "ÿµŸäÿßÿØ", "ÿ∞ÿ¶ÿßÿ®"] } },
            { en: "Cinema", ar: "ÿßŸÑÿ≥ŸäŸÜŸÖÿß", words: { en: ["Movie", "Popcorn", "Screen", "Actors"], ar: ["ŸÅŸäŸÑŸÖ", "ŸÅÿ¥ÿßÿ±", "ÿ¥ÿßÿ¥ÿ©", "ŸÖŸÖÿ´ŸÑŸäŸÜ"] } }
        ];

        function App() {
            const [lang, setLang] = useState('en');
            const [user, setUser] = useState(null);
            const [roomId, setRoomId] = useState('');
            const [gameData, setGameData] = useState(null);
            const [loading, setLoading] = useState(true);
            const [error, setError] = useState(null);
            const [playerName, setPlayerName] = useState(localStorage.getItem('spy_name') || '');
            const [selectedWord, setSelectedWord] = useState(null);
            const [copied, setCopied] = useState(false);

            const t = TRANSLATIONS[lang];

            // 1. Auth Setup
            useEffect(() => {
                const unsubscribe = auth.onAuthStateChanged(async (u) => {
                    if (!u) {
                        try { await auth.signInAnonymously(); } catch(e) { console.error(e); }
                    } else {
                        setUser(u);
                        setLoading(false);
                    }
                });
                return () => unsubscribe();
            }, []);

            // 2. Real-time Room Sync
            useEffect(() => {
                if (!user || !roomId) return;
                
                const roomRef = db.collection('artifacts').doc(appId).collection('public').doc('data').collection('rooms').doc(roomId.toUpperCase());
                
                const unsubscribe = roomRef.onSnapshot((doc) => {
                    if (doc.exists) {
                        setGameData(doc.data());
                    } else {
                        setGameData(null);
                        setRoomId('');
                    }
                }, (err) => {
                    console.error("Firestore Error:", err);
                    setError("Connection lost. Please refresh.");
                });

                return () => unsubscribe();
            }, [user, roomId]);

            const copyToClipboard = () => {
                const el = document.createElement('textarea');
                el.value = roomId;
                document.body.appendChild(el);
                el.select();
                document.execCommand('copy');
                document.body.removeChild(el);
                setCopied(true);
                setTimeout(() => setCopied(false), 2000);
            };

            const handleCreateRoom = async () => {
                if (!playerName.trim()) { setError(t.errorName); return; }
                setLoading(true);
                localStorage.setItem('spy_name', playerName);
                const newId = Math.random().toString(36).substring(2, 7).toUpperCase();
                const roomRef = db.collection('artifacts').doc(appId).collection('public').doc('data').collection('rooms').doc(newId);
                
                try {
                    await roomRef.set({
                        id: newId,
                        admin: user.uid,
                        players: [{ uid: user.uid, name: playerName }],
                        status: 'waiting',
                        spyId: null,
                        location: null,
                        word: null,
                        wordOptions: null,
                        lastUpdate: Date.now()
                    });
                    setRoomId(newId);
                } catch (e) { setError("Database Error: " + e.message); }
                setLoading(false);
            };

            const handleJoinRoom = async () => {
                if (!playerName.trim()) { setError(t.errorName); return; }
                if (!roomId) return;
                setLoading(true);
                localStorage.setItem('spy_name', playerName);
                const targetId = roomId.toUpperCase();
                const roomRef = db.collection('artifacts').doc(appId).collection('public').doc('data').collection('rooms').doc(targetId);
                
                try {
                    const snap = await roomRef.get();
                    if (snap.exists) {
                        const data = snap.data();
                        const players = [...data.players];
                        if (!players.find(p => p.uid === user.uid)) {
                            players.push({ uid: user.uid, name: playerName });
                            await roomRef.update({ 
                                players: players,
                                lastUpdate: Date.now() 
                            });
                        }
                        setRoomId(targetId);
                    } else setError(t.errorJoin);
                } catch (e) { setError("Join Error: " + e.message); }
                setLoading(false);
            };

            const startGame = async () => {
                if (gameData.players.length < 3) { setError(t.errorStart); return; }
                const loc = LOCATIONS[Math.floor(Math.random() * LOCATIONS.length)];
                const enOptions = [...loc.words.en].sort(() => 0.5 - Math.random());
                const arOptions = [...loc.words.ar].sort(() => 0.5 - Math.random());
                const wordIdx = Math.floor(Math.random() * loc.words.en.length);
                const spy = gameData.players[Math.floor(Math.random() * gameData.players.length)];

                const roomRef = db.collection('artifacts').doc(appId).collection('public').doc('data').collection('rooms').doc(roomId);
                await roomRef.update({
                    status: 'playing',
                    location: { en: loc.en, ar: loc.ar },
                    word: { en: loc.words.en[wordIdx], ar: loc.words.ar[wordIdx] },
                    wordOptions: { en: enOptions, ar: arOptions },
                    spyId: spy.uid,
                    lastUpdate: Date.now()
                });
                setSelectedWord(null);
            };

            const resetGame = async () => {
                const roomRef = db.collection('artifacts').doc(appId).collection('public').doc('data').collection('rooms').doc(roomId);
                await roomRef.update({ 
                    status: 'waiting', 
                    spyId: null, 
                    location: null, 
                    word: null, 
                    wordOptions: null,
                    lastUpdate: Date.now()
                });
            };

            if (loading) return (
                <div className="flex flex-col items-center justify-center h-screen space-y-4">
                    <div className="w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"></div>
                    <p className="animate-pulse text-slate-400 uppercase tracking-widest text-xs font-bold">{t.loading}</p>
                </div>
            );

            return (
                <div className={`min-h-screen p-4 md:p-8 flex flex-col items-center justify-center transition-all ${lang === 'ar' ? 'lang-ar text-right' : 'lang-en text-left'}`} dir={lang === 'ar' ? 'rtl' : 'ltr'}>
                    <div className="w-full max-w-md">
                        {/* Top Bar */}
                        <div className="flex justify-between items-center mb-6">
                            <div className="text-[10px] text-slate-600 font-mono tracking-tighter uppercase">
                                {t.serverStatus}
                            </div>
                            <button 
                                onClick={() => setLang(lang === 'en' ? 'ar' : 'en')}
                                className="bg-slate-800 hover:bg-slate-700 px-4 py-1.5 rounded-full text-xs font-bold border border-slate-700 transition-all flex items-center gap-2"
                            >
                                üåê {lang === 'en' ? 'ÿßŸÑÿπÿ±ÿ®Ÿäÿ©' : 'English'}
                            </button>
                        </div>

                        {/* Header */}
                        <div className="text-center mb-8">
                            <h1 className="text-4xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-red-500 via-white to-blue-500 mb-2">
                                {t.title}
                            </h1>
                            <p className="text-slate-500 text-xs uppercase tracking-[0.2em] font-bold">{t.subtitle}</p>
                        </div>

                        {error && (
                            <div className="mb-6 p-3 bg-red-900/30 border border-red-500/50 rounded-xl text-red-200 text-xs flex justify-between items-center animate-bounce">
                                <span>{error}</span>
                                <button onClick={() => setError(null)}>‚úï</button>
                            </div>
                        )}

                        {!gameData ? (
                            <div className="glass-panel p-8 rounded-3xl shadow-2xl space-y-6 border-slate-800/50">
                                <div className="space-y-2">
                                    <label className="text-[10px] text-slate-500 uppercase tracking-widest font-bold px-1">{t.playerName}</label>
                                    <input 
                                        type="text" 
                                        placeholder={t.namePlaceholder}
                                        className="w-full bg-slate-900/50 border border-slate-700 p-4 rounded-2xl focus:ring-2 focus:ring-blue-500 outline-none transition-all placeholder:text-slate-700 font-bold"
                                        value={playerName}
                                        onChange={(e) => setPlayerName(e.target.value)}
                                    />
                                </div>

                                <div className="space-y-4 pt-2">
                                    <button 
                                        onClick={handleCreateRoom}
                                        className="w-full spy-gradient py-4 rounded-2xl font-bold text-lg shadow-lg hover:brightness-110 active:scale-[0.98] transition-all"
                                    >
                                        {t.createRoom}
                                    </button>
                                    
                                    <div className="relative py-2 text-center">
                                        <span className="bg-[#020617] px-4 text-slate-700 text-[10px] uppercase font-bold tracking-widest">{t.orJoin}</span>
                                        <div className="absolute top-1/2 left-0 right-0 h-[1px] bg-slate-800/50 -z-10"></div>
                                    </div>

                                    <div className="flex gap-2">
                                        <input 
                                            type="text" 
                                            placeholder={t.roomCode}
                                            className="flex-1 bg-slate-900/50 border border-slate-700 p-4 rounded-2xl uppercase font-mono text-center tracking-[0.3em] outline-none focus:border-blue-500 font-black"
                                            value={roomId}
                                            onChange={(e) => setRoomId(e.target.value.toUpperCase())}
                                        />
                                        <button 
                                            onClick={handleJoinRoom}
                                            className="bg-slate-700 hover:bg-slate-600 px-6 rounded-2xl font-bold transition-all active:scale-95"
                                        >
                                            {t.join}
                                        </button>
                                    </div>
                                </div>
                            </div>
                        ) : (
                            <div className="space-y-6 animate-in fade-in duration-500">
                                <div className="glass-panel p-4 rounded-3xl flex justify-between items-center shadow-xl border-slate-700/50">
                                    <div className="flex items-center gap-3">
                                        <div className="relative group cursor-pointer" onClick={copyToClipboard}>
                                            <span className="text-[10px] text-slate-500 block uppercase font-bold mb-1">{t.roomCode}</span>
                                            <div className="flex items-center gap-2">
                                                <span className="text-3xl font-black text-blue-400 tracking-widest font-mono">{gameData.id}</span>
                                                <button className={`p-1.5 rounded-lg transition-colors ${copied ? 'bg-green-500/20 text-green-400' : 'bg-slate-800 text-slate-400 hover:text-white'}`}>
                                                    {copied ? '‚úÖ' : 'üìã'}
                                                </button>
                                            </div>
                                            {copied && <span className="absolute -bottom-6 left-0 text-[10px] text-green-500 font-bold">{t.copied}</span>}
                                        </div>
                                    </div>
                                    <div className={lang === 'ar' ? 'text-left' : 'text-right'}>
                                        <span className="text-[10px] text-slate-500 block uppercase font-bold mb-1">{t.participants}</span>
                                        <span className="text-3xl font-black text-white">{gameData.players.length}</span>
                                    </div>
                                </div>

                                {gameData.status === 'waiting' ? (
                                    <div className="glass-panel p-6 rounded-[2rem] space-y-6 border-slate-800">
                                        <div className="grid grid-cols-1 gap-2">
                                            {gameData.players.map((p, idx) => (
                                                <div key={idx} className={`p-4 rounded-2xl border flex justify-between items-center transition-all ${p.uid === user.uid ? 'border-blue-500/50 bg-blue-500/5' : 'border-slate-800/50 bg-slate-800/20'}`}>
                                                    <div className="flex items-center gap-3">
                                                        <div className={`w-2.5 h-2.5 rounded-full ${p.uid === user.uid ? 'bg-blue-500 shadow-[0_0_10px_rgba(59,130,246,0.5)]' : 'bg-slate-700'}`}></div>
                                                        <span className={`text-sm font-bold ${p.uid === user.uid ? 'text-white' : 'text-slate-400'}`}>{p.name} {p.uid === user.uid && '(You)'}</span>
                                                    </div>
                                                    {p.uid === gameData.admin && <span className="text-lg">üëë</span>}
                                                </div>
                                            ))}
                                        </div>

                                        {gameData.admin === user.uid ? (
                                            <button 
                                                onClick={startGame}
                                                className="w-full bg-green-600 hover:bg-green-500 py-4 rounded-2xl font-black text-lg shadow-xl shadow-green-900/20 active:scale-95 transition-all mt-4"
                                            >
                                                {t.startBtn}
                                            </button>
                                        ) : (
                                            <div className="text-center py-6 text-slate-500 flex flex-col items-center gap-4 italic text-xs uppercase tracking-widest font-bold">
                                                <div className="w-8 h-8 border-2 border-blue-500/20 border-t-blue-500 rounded-full animate-spin"></div>
                                                {t.waitingAdmin}
                                            </div>
                                        )}
                                    </div>
                                ) : (
                                    <div className="space-y-6 animate-in slide-in-from-bottom-4 duration-700">
                                        <div className={`p-8 rounded-[3rem] border-2 shadow-2xl text-center relative overflow-hidden transition-all ${gameData.spyId === user.uid ? 'border-red-500/50 spy-gradient' : 'border-blue-500/50 citizen-gradient'}`}>
                                            {gameData.spyId === user.uid ? (
                                                <div className="space-y-6">
                                                    <div className="text-7xl mb-4 grayscale-[0.2] drop-shadow-2xl">üïµÔ∏è‚Äç‚ôÇÔ∏è</div>
                                                    <h2 className="text-5xl font-black uppercase tracking-tighter mb-2 italic">{t.spyTitle}</h2>
                                                    <p className="text-red-100 text-sm opacity-80 font-medium px-4">{t.spyDesc}</p>
                                                    <div className="inline-block px-8 py-2.5 bg-black/40 rounded-full text-[10px] font-black uppercase tracking-[0.2em] border border-white/10 animate-pulse-slow">
                                                        {t.missionLabel}
                                                    </div>
                                                </div>
                                            ) : (
                                                <div className="space-y-6">
                                                    <h2 className="text-xs text-blue-100 font-black uppercase tracking-[0.3em] opacity-60 italic">{t.citizenTitle}</h2>
                                                    <div className="space-y-2">
                                                        <p className="text-[10px] text-blue-200 uppercase font-bold tracking-widest">{t.locationIs}</p>
                                                        <div className="text-5xl font-black text-white drop-shadow-lg tracking-tight">{gameData.location[lang]}</div>
                                                    </div>
                                                    <div className="h-[1px] bg-white/10 w-2/3 mx-auto my-6"></div>
                                                    <div className="space-y-4">
                                                        <p className="text-[10px] text-blue-200 uppercase font-bold tracking-widest">{t.pickWord}</p>
                                                        <div className="grid grid-cols-2 gap-3">
                                                            {gameData.wordOptions[lang].map((word, i) => (
                                                                <button 
                                                                    key={i}
                                                                    onClick={() => setSelectedWord(word)}
                                                                    className={`p-4 rounded-2xl border-2 transition-all font-black text-sm uppercase tracking-tight ${selectedWord === word ? 'bg-yellow-400 text-slate-900 border-white scale-105 shadow-xl' : 'bg-black/20 border-white/5 text-blue-100 hover:bg-black/40'}`}
                                                                >
                                                                    {word}
                                                                </button>
                                                            ))}
                                                        </div>
                                                        {selectedWord && (
                                                            <div className={`mt-4 text-xs font-black py-2 px-6 rounded-full inline-block border-2 shadow-lg animate-bounce ${selectedWord === gameData.word[lang] ? "bg-green-500/20 border-green-500 text-green-400" : "bg-red-500/20 border-red-500 text-red-400"}`}>
                                                                {selectedWord === gameData.word[lang] ? "CORRECT ‚úÖ" : "WRONG ‚ùå"}
                                                            </div>
                                                        )}
                                                    </div>
                                                </div>
                                            )}
                                        </div>

                                        <div className="glass-panel p-6 rounded-[2rem] text-[11px] text-slate-400 space-y-3 leading-relaxed border-slate-800">
                                            <p className="font-black text-slate-200 mb-2 uppercase tracking-[0.2em]">{t.instructions}</p>
                                            <p className="flex gap-2"><span className="text-blue-500">‚Ä¢</span> {t.instr1}</p>
                                            <p className="flex gap-2"><span className="text-blue-500">‚Ä¢</span> {t.instr2}</p>
                                            <p className="flex gap-2"><span className="text-blue-500">‚Ä¢</span> {t.instr3}</p>
                                        </div>

                                        {gameData.admin === user.uid && (
                                            <button 
                                                onClick={resetGame}
                                                className="w-full bg-slate-900 border border-slate-700 py-4 rounded-2xl font-black hover:bg-slate-800 active:scale-95 transition-all text-sm uppercase tracking-widest"
                                            >
                                                üîÑ {t.newRound}
                                            </button>
                                        )}
                                    </div>
                                )}
                            </div>
                        )}
                        
                        <div className="mt-12 text-center text-[9px] text-slate-800 font-mono tracking-[0.3em] uppercase">
                            USER_HASH: {user.uid.substr(0,10)}
                        </div>
                    </div>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
